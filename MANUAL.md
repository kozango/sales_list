# Slackバックアップシステム ご利用マニュアル

このマニュアルは、Slackメッセージのバックアップシステムの運用方法について説明します。

## 1. ご利用開始までの流れ（初回導入時）

貴社専用のバックアップシステムをセットアップするための手順です。

### 1.1. GitHubアカウントのご準備

バックアップデータは、安全なGitHubのプライベートリポジトリで管理します。まず、GitHubのアカウントをご準備ください。

1.  **アカウント作成**:
    *   まだアカウントをお持ちでない場合は、[GitHub公式サイト](https://github.com/join) から無料で作成できます。
2.  **アカウント名のご連絡**:
    *   作成したGitHubのアカウント名を、弊社担当者（またはCascade）までお知らせください。

ご連絡いただき次第、弊社で貴社専用のバックアップリポジトリを作成し、お知らせいただいたGitHubアカウントにアクセス権限を付与します。

### 1.2. Slack Botの準備

バックアップには専用のSlack Botが必要です。弊社担当者が作成を代行し、必要なトークン情報を安全に設定します。お客様側での作業は不要です。

## 2. バックアップ対象チャンネルの管理

バックアップするチャンネルは `channels.csv` ファイルで管理します。チャンネルのリストは毎日深夜に自動で更新されます。

### 2.1. 新しいチャンネルをバックアップ対象にする方法

**【パブリックチャンネルの場合】**

新しいパブリックチャンネルは、作成されると**毎日深夜に自動で`channels.csv`のリストに追加されます**。お客様側での特別な作業は不要です。

**【プライベートチャンネルの場合】**

1.  バックアップしたいプライベートチャンネルで、`/invite @[Bot名]` コマンドを実行してBotを招待してください。
2.  Botを招待すると、**毎日深夜に自動で`channels.csv`のリストにそのチャンネルが追加されます**。

**【重要】**
- Botが招待されていないプライベートチャンネルはリストに表示されず、バックアップ対象にできません。
- 新しくリストに追加されたチャンネルは、安全のため初期状態ではバックアップが無効 (`backup_enabled`が`false`)になっています。

### 2.2. チャンネルのバックアップを有効にする

`channels.csv`にチャンネルが追加されたら、以下の手順でバックアップを有効化します。

1.  リポジトリ内にある `channels.csv` ファイルを開きます。
2.  バックアップしたいチャンネルの行を探し、`false` となっている部分を `true` に書き換えてください。
3.  編集が終わったら、ページ下部の `Commit changes` ボタンを押して変更を保存します。

これで、次回の自動実行時（毎日深夜）から、指定したチャンネルのバックアップが開始されます。

## 3. バックアップされたデータの見方

バックアップされたメッセージは、GitHubリポジトリ内の `archives` フォルダに保存されています。

1.  **フォルダ構造**:
    *   データは `archives` > `[チャンネルID]` > `[年]` > `[月]` の階層で整理されています。
    *   ファイル名は `[チャンネルID]_[年]-[月]-[日].tsv` となっています。
2.  **データの確認**:
    *   GitHub上でファイルをクリックすると、その日のメッセージ内容をテキスト形式で確認できます。
    *   TSVファイルは、ExcelやGoogleスプレッドシートなどの表計算ソフトで開くと、より見やすく表示できます。その際は、区切り文字として「タブ」を指定してください。
